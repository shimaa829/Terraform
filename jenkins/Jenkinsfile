pipeline {
    agent any 
    stages {
        stage('Terraform init') { 
            steps {
                sh 'pwd && ls && terraform init -input=false -var accessKey=$AWS_ACCESS_KEY_ID -var secretKey=$AWS_SECRET_ACCESS_KEY '

            }
           }

        stage('select dev workspace') { 
            steps {
                sh 'terraform workspace select dev'

            }
           }
           
            stage('Terraform apply') { 
            steps {
                sh 'terraform apply -var-file=dev.tfvars -input=false -auto-approve'

            }
           }
        }
    }
